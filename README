# ğŸš— Car Rental System API

Projektas skirtas **vidinei darbuotojÅ³ automobiliÅ³ nuomos sistemos valdymo** daliai. Backend sukurtas su **FastAPI**, naudojant **JWT autentifikacijÄ…** ir aiÅ¡kiai struktÅ«ruotÄ… sluoksninÄ™ architektÅ«rÄ….

---

## â™»ï¸ ArchitektÅ«ra (Layered Structure)

```
POST /api/v1/auth/login
    â”‚
    â–¼
[ endpoint (auth.py) ]
    â”‚
    â”œâ schemas/ â validacija (LoginRequest)
    â”œâ repositories/ â DB uÅ¾klausos (get_by_email)
    â””â services/ â verslo logika (slaptaÅ¾odÅ¾iÅ³ tikrinimas, JWT)
```

---

## ğŸ“‚ Kodo struktÅ«ra

```
autorent_api/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ main.py                       â Programos paleidimo failas
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â””â”€â”€ v1/endpoints/
â”‚   â”‚       â”œâ”€â”€ auth.py              â Prisijungimas / registracija
â”‚   â”‚       â”œâ”€â”€ employee.py          â DarbuotojÅ³ CRUD
â”‚   â”‚       â””â”€â”€ car.py              â AutomobiliÅ³ CRUD
â”‚   â”œâ”€â”€ db/
â”‚   â”‚   â”œâ”€â”€ session.py               â DB sesija
â”‚   â”‚   â””â”€â”€ base.py                  â ModeliÅ³ registracija
â”‚   â”œâ”€â”€ models/                      â SQLAlchemy modeliai
â”‚   â”‚   â”œâ”€â”€ employee.py
â”‚   â”‚   â””â”€â”€ car.py
â”‚   â”œâ”€â”€ schemas/                     â Pydantic input/output schemos
â”‚   â”‚   â”œâ”€â”€ auth.py
â”‚   â”‚   â”œâ”€â”€ employee.py
â”‚   â”‚   â””â”€â”€ car.py
â”‚   â”œâ”€â”€ repositories/                â DB logika
â”‚   â”‚   â””â”€â”€ employee.py, car.py
â”‚   â”œâ”€â”€ services/                    â Verslo logika
â”‚   â”‚   â””â”€â”€ auth_service.py
â”‚   â””â”€â”€ api/deps.py                 â priklausomybiÅ³ injekcija
â””â”€â”€ requirements.txt
```

---

## ğŸ” Autentifikacija

- JWT tokenas generuojamas per `POST /api/v1/auth/login`
- `get_current_user()` tikrina tokenÄ… visiems apsaugotiems endpointams

**Endpointai:**
- [`POST /api/v1/auth/login`](http://localhost:8000/docs#/Authentication/login_api_v1_auth_login_post)
- [`POST /api/v1/auth/register`](http://localhost:8000/docs#/Authentication/register_api_v1_auth_register_post)
- [`GET /api/v1/auth/me`](http://localhost:8000/docs#/Authentication/me_api_v1_auth_me_get)

---

## ğŸ’¼ Darbuotojai

CRUD veiksmai:
- Gauti visus darbuotojus (vieÅ¡as)
- Redaguoti / IÅ¡trinti darbuotojÄ…

**Failai:** `schemas/employee.py`, `repositories/employee.py`, `endpoints/employee.py`

**Swagger:**
- [`GET /api/v1/employees/`](http://localhost:8000/docs#/Employees/get_employees_api_v1_employees__get)

---

## ğŸš— Automobiliai

Pilnas CRUD + bÅ«senos keitimas:
- PridÄ—ti, redaguoti, paÅ¡alinti
- `PATCH /cars/{id}/status`

**Failai:** `schemas/car.py`, `repositories/car.py`, `endpoints/car.py`

**Swagger:**
- [`GET /api/v1/cars/`](http://localhost:8000/docs#/Cars/get_all_cars_api_v1_cars__get)
- [`POST /api/v1/cars/`](http://localhost:8000/docs#/Cars/create_car_api_v1_cars__post)

---

## ğŸšª Projekto naudojimas komandai

### 1. Projekto paleidimas

```bash
git clone https://github.com/TAVO-VARDAS/autorent_api.git
cd autorent_api
pip install -r requirements.txt
uvicorn app.main:app --reload
```

### 2. Savo Å¡akos (branch) sukÅ«rimas

Kiekvienas narys turi dirbti savo Å¡akoje pagal funkcionalumÄ…. Å akos pavadinimo formatas:
```
feature/<funkcionalumas>  pvz:  feature/orders-endpoints
fix/<problema>            pvz:  fix/login-validation
```

#### Komandos pavyzdys:
```bash
git checkout -b feature/orders-endpoints
git add .
git commit -m "Sukurtas orders CRUD"
git push origin feature/orders-endpoints
```

---

## ğŸ§± Kaip kurti naujus endpointus (struktÅ«ruotai)

1. **Sukurk SQLAlchemy modelÄ¯**
   - `models/<modulis>.py`
2. **Sukurk schemas** (Ä¯Ä—jimo/iÅ¡Ä—jimo)
   - `schemas/<modulis>.py` su `ModelCreate`, `ModelUpdate`, `ModelOut`
3. **Sukurk duomenÅ³ prieigos logikÄ…**
   - `repositories/<modulis>.py` su `get_all`, `get_by_id`, `create`, `update`, `delete`
4. **Sukurk endpoint failÄ…**
   - `api/v1/endpoints/<modulis>.py` su FastAPI router'iu
5. **Registruok router'Ä¯ Ä¯ `main.py`**:
   ```python
   from app.api.v1.endpoints import <modulis>
   app.include_router(<modulis>.router, prefix="/api/v1/<modulis>", tags=["<Modulis>"])
   ```
6. **Swagger'e testuok veikimÄ…:** [`http://localhost:8000/docs`](http://localhost:8000/docs)

---